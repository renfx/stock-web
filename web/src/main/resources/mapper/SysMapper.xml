<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.rfxdevelop.stockweb.dao.simple.SysMapper" >

  <select id="selectTables" resultType="java.util.LinkedHashMap">
      select
      c.table_name,
      c.column_name,
      if(c.column_comment is null or c.column_comment ='',c.column_name,c.column_comment) column_comment,
      if(u.table_name is null,false,true) _key,
      c.column_type,
      c.data_type,
      c.is_nullable
      from  information_schema.columns c
    LEFT JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE u on u.table_name = c.table_name and u.column_name = c.column_name
    where 1=1
      <foreach collection="tableSchemas" item="tableSchema" open="" close="" separator=" ">
          and c.table_schema = #{tableSchema}
      </foreach>
    ORDER BY c.table_name

  </select>

</mapper>